<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Demo of MWE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Material+Icons&display=block" rel="stylesheet" />
    <script type="module" src="../dist/mwe-bundle.min.js"></script>
    <link rel="stylesheet" href="../src/index.css" />

    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <aside>
      <nav>
        <md-button moving-page="about" text>About MWE (关于 MWE)</md-button>
        <md-button moving-page="avatars" text>Avatars (头像)</md-button>
        <md-button moving-page="buttons" text>Common buttons (按钮)</md-button>
        <md-button moving-page="chips" text>Chips (纸片)</md-button>
        <md-button moving-page="dialogs" text>Dialogs (对话框)</md-button>
        <md-button moving-page="fabs" text>FABs (浮动操作按钮)</md-button>
        <md-button moving-page="icons" text>Icons (图标)</md-button>
        <md-button moving-page="menus" text>Menus (菜单)</md-button>
        <md-button moving-page="ripples" text>Ripples (波纹)</md-button>
        <md-button moving-page="typography" text>Typography (文字排版)</md-button>
      </nav>
    </aside>
    <main>
      <div class="main-content"></div>
    </main>
    <md-fab theme-toggler tertiary>
      <md-icon>brightness_6</md-icon>
    </md-fab>

    <script>
      const toggleThemeBtn = document.querySelector('[theme-toggler]');
      toggleThemeBtn.addEventListener('click', () => {
        M.toggleTheme();
      });

      const mainContainer = document.querySelector('main');
      const mainContent = document.querySelector('.main-content');
      const movingPages = document.querySelectorAll('[moving-page]');
      var latestPage = movingPages[0];

      var XHR = new XMLHttpRequest();
      XHR.onreadystatechange = () => {
        if (XHR.readyState == 4 && XHR.status == 200) {
          mainContent.innerHTML = XHR.responseText;
          mainContainer.scroll(0, 0);
          mainContainer.style.opacity = 1;
        }
      };
      var movePage = (_source, _this) => {
        if (_source == _this) return;
        XHR.open('GET', './pages/' + _source + '.html', true);
        XHR.send();
        mainContainer.style.opacity = 0;
        latestPage.removeAttribute('tonal');
        latestPage.setAttribute('text', '');
        _this.removeAttribute('text');
        _this.setAttribute('tonal', '');
        latestPage = _this;
      };
      movingPages.forEach((movingPage) => {
        movingPage.addEventListener('click', () => movePage(movingPage.getAttribute('moving-page'), movingPage));
      });
      movePage('about', movingPages[0]);
    </script>
  </body>
</html>
