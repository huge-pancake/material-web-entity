<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <title>Demo of MWE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Flex:wght@300;400;500&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <script type="module" src="../dist/mwe-bundle.min.js"></script>
    <link rel="stylesheet" href="../src/index.css" />

    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <aside>
      <nav>
        <div class="little-title">This project</div>
        <md-button moving-page="about" text>About MWE (关于 MWE)</md-button>
      </nav>
      <nav>
        <div class="little-title">Components</div>
        <md-button moving-page="avatar" text>Avatar (头像)</md-button>
        <md-button moving-page="button" text>Common button (按钮)</md-button>
        <md-button moving-page="card" text>Card (卡片)</md-button>
        <md-button moving-page="chip" text>Chip (纸片)</md-button>
        <md-button moving-page="dialog" text>Dialog (对话框)</md-button>
        <md-button moving-page="fab" text>FAB (浮动操作按钮)</md-button>
        <md-button moving-page="icon" text>Icon (图标)</md-button>
        <md-button moving-page="icon-button" text>Icon button (图标按钮)</md-button>
        <md-button moving-page="menu" text>Menu (菜单)</md-button>
        <md-button moving-page="ripple" text>Ripple (波纹)</md-button>
        <md-button moving-page="switch" text>Switch (开关)</md-button>
        <md-button moving-page="text-field" text>Text field (文本框)</md-button>
        <md-button moving-page="typography" text>Typography (文字排版)</md-button>
      </nav>
    </aside>
    <main>
      <div class="main-content"></div>
    </main>
    <md-fab lang-toggler secondary small id="lang-toggler">
      <md-icon>translate</md-icon>
    </md-fab>
    <md-fab theme-toggler tertiary>
      <md-icon>brightness_6</md-icon>
    </md-fab>
    <md-menu id="lang-toggler" no-icon dense>
      <md-menu-item onclick="document.documentElement.setAttribute('lang', 'en')">
        <span slot="label">English</span>
      </md-menu-item>
      <md-menu-item onclick="document.documentElement.setAttribute('lang', 'zh-CN')">
        <span slot="label">简体中文 (Simplified Chinese)</span>
      </md-menu-item>
    </md-menu>

    <script>
      const toggleThemeBtn = document.querySelector('[theme-toggler]');
      toggleThemeBtn.addEventListener('click', () => {
        mUtil.toggleTheme();
      });

      const mainContainer = document.querySelector('main');
      const mainContent = document.querySelector('.main-content');
      const movingPages = document.querySelectorAll('[moving-page]');
      var latestPage = movingPages[0];

      var XHR = new XMLHttpRequest();
      XHR.onreadystatechange = () => {
        if (XHR.readyState == 4 && XHR.status == 200) {
          mainContent.innerHTML = XHR.responseText;
          mainContainer.scroll(0, 0);
          mainContainer.style.opacity = 1;
        }
      };
      var movePage = (_source, _this) => {
        if (_source == _this) return;
        XHR.open('GET', './pages/' + _source + '.html', true);
        XHR.send();
        mainContainer.style.opacity = 0;
        latestPage.removeAttribute('tonal');
        latestPage.setAttribute('text', '');
        _this.removeAttribute('text');
        _this.setAttribute('tonal', '');
        latestPage = _this;
      };
      movingPages.forEach((movingPage) => {
        movingPage.addEventListener('click', () => movePage(movingPage.getAttribute('moving-page'), movingPage));
      });
      movePage('about', movingPages[0]);
    </script>
  </body>
</html>
